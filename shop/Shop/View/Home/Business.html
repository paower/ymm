<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>产品上传</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <meta name="format-detection" content="telephone=no"/>

    <!-- Link Swiper's CSS -->

    <link rel="stylesheet" type="text/css" href="__CSS__/style.css">
    <link rel="stylesheet" type="text/css" href="__CSS__/foot.css">


    <link rel="stylesheet" href="__CSS__/head.css">
    <link rel="stylesheet" href="__ICON__/iconfont.css">
    <link rel="stylesheet" href="__CSS__/webuploader.css">
    <link rel="stylesheet" type="text/css" href="__CSS__/style22.css">
<script type="text/javascript" src="__JS__/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="__JS__/wangEditor.min.js"></script>

    <!--弹框JS-->
    <script type="text/javascript" src="/Public/home/common/layer/layer.js"></script>
	<!--1. 基于jquery ui-->
    <script src="/common/fileupload/jquery.ui.widget.js"></script>
    <!--2. 遇见跨域-->
    <script src="/common/fileupload/jquery.iframe-transport.js"></script>
    <!--3. 核心文件-->
<script src="/common/fileupload/jquery.fileupload.js"></script>
</head>
<body>
<style>
    .address {
        margin-right: 4%;
        margin-left: 4%;
    }

    .address li {
        line-height: 10vmin;
        font-size: 4.2vmin;
    }

    .address li input {
        width: 66%;
        height: 5vmin;
        border: none;
        padding: 0 1vmin;
        border-bottom: 1px solid #aaaaaa;
    }
    .address li img{
		width:98vmin;
        height:62.5vmin;
    }
    .address li input[type=file]{
        border-bottom: none;
    }

    .selectcc {
        width: 83%;
        border: none;
        border-bottom: 1px solid #aaa;
        font-family: "微软雅黑";
        appearance: none;
        -moz-appearance: none;
        -webkit-appearance: none;
        padding-right: 14px;
    }

    .dzq {
        width: 84%;
        height: 5vmin;
        border: none;
        border-bottom: 1px solid #aaaaaa;
    }
  
    .col-sm-10{
		display: inline-block;
    }
    .col-sm-10 .radio-inline{
      display: inline-block;
      margin-right: 4vmin;
    }
    .col-sm-10 .radio-inline input{
      display: inline-block;
      margin-right: 1vmin;
    }
    .form-group{
      	height:6.5vmin;
    }
  
  
  .choice{  
    position: relative;  
  }  
  .choice .radio{  
    position: relative;  
    display: inline-block;  
    padding-left: 7.5vmin;  
    margin-right:6vmin;
  }  
  .choice .radio input{  
    position: absolute;  
    left: -9999px;  
  }  
  .choice .radio i{  
    display: block;  
    position: absolute;  
    top: 0px;  
    left: 0;  
    width: 12px;  
    height: 12px;  
    outline: 0;  
    border: 1px solid #c2c2c2;  
    background: #fff;  
    border-radius: 50%;  
    transition: border-color .3s  
      -webkit-transition: border-color .3s;  
  }  
  .choice .radio input:checked+i{  
    border-color: #5FB878;  
  }  
  .choice .radio input+i:after{  
    position: absolute;  
    content: '';  
    top: 3px;  
    left: 3px;  
    width: 6px;  
    height: 6px;  
    border-radius: 50%;  
    background-color: #5FB878;  
    opacity: 0;  
    transition: opacity .1s;  
    -webkit-transition: opacity .1s;  
  }  
  .choice .radio input:checked+i:after{  
    opacity: 1;  
  }
  	
</style>
<div class="header">
    <div class="header_l" style="width: 15%;">
        <a href="Javascript:history.go(-1)"><img src="__IMG__/lpg.png" alt=""><span>商品信息</span></a>

    </div>
    <div class="header_c" style="width: 70%;"><h1 style="color:#000"></h1></div>
    <div class="header_r" style="width: 15%;"></div>
   
</div>
<form action="{:U('Shop/Home/Productsup')}" method="post" enctype="multipart/form-data" id="goodsinfo">
    <div class="address" style="margin-left:1vmin;margin-right:1vmin;">
        <ul id="inputa">
            <input type="hidden" value="{$id}" name="id">

            <li>商品名称：<input type="text" value="{$produce_dets['name']}" name="name"></li>
           
            <li>商品详情：<div  id="editor"></div><input name="content" type="hidden" id="text1" value="{$produce_dets['content']}"/> </li>

            <li>售价：<input type="text" value="{$produce_dets['price']}" name="price"></li>
            <li>原价：<input type="text" value="{$produce_dets['old_price']}" name="old_price"></li>
            <li>邮费：<input type="text" value="{$produce_dets['freight']}" name="freight" placeholder="设置0元则为包邮,到付请填写到付"></li>
           
                                        <div class="form-group">
                                <label class="col-sm-2 control-label">是否热门：</label>
                                <div class="col-sm-10">
                                    <label class="radio-inline choice">
                                      <label class="radio">是<input type="radio" {$produce_dets["gr_hot"]==1?'checked':''} name="gr_hot" value="1"><i></i></label>  
		   							  <label class="radio">否<input type="radio" {$produce_dets["gr_hot"]==2?'checked':''} value="2" name="gr_hot"><i></i></label> 
                                    
                                </div>
                            </div>

                       <div class="form-group">
                                <label class="col-sm-2 control-label">是否最新：</label>
                                <div class="col-sm-10">
                                    <label class="radio-inline choice">
                                        <label class="radio">是<input type="radio" {$produce_dets["gr_new"]==1?'checked':''} name="gr_new" value="1"><i></i></label>  
                                        <label class="radio">否<input type="radio" {$produce_dets["gr_new"]==2?'checked':''} value="2" name="gr_new"><i></i></label> 
                                      
                                      
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">是否推荐：</label>
                                <div class="col-sm-10">
                                    <label class="radio-inline choice">
                                       <label class="radio">是<input type="radio" {$produce_dets["gr_tuijian"]==1?'checked':''} name="gr_tuijian" value="1"><i></i></label>  
                                        <label class="radio">否<input type="radio" {$produce_dets["gr_tuijian"]==2?'checked':''} value="2" name="gr_tuijian"><i></i></label> 
                                      
                                      
                                </div>
                            </div>

            <!-- <li>库存：<input type="text" value="{$produce_dets['stock']}" placeholder="不填写默认为888" name="kucun"></li> -->
            <div class="cate_box">
                <span>类目</span>
                <?php 
                    $num = count($produce_dets['parameter']);
                    if($num==0){
                        $num=1;
                    }
                ?>
                        <div class="cate" style="width: 100%;height: 60px;">
                            型号<input type="text" name="cate[]" value="{$produce_dets['parameter'][0]['type']}"><br>
                            价格<input type="text" name="price[]" value="{$produce_dets['parameter'][0]['price']}"><br>
                            库存<input type="text" name="kucun[]" value="{$produce_dets['parameter'][0]['kucun']}"><br>
                        </div>
                <?php
                    for ($i=1; $i < $num; $i++) { 
                    ?>
                        <div class="cate2" style="width: 100%;height: 60px;">
                            型号<input type="text" name="cate[]" value="{$produce_dets['parameter'][$i]['type']}"><br>
                            价格<input type="text" name="price[]" value="{$produce_dets['parameter'][$i]['price']}"><br>
                            库存<input type="text" name="kucun[]" value="{$produce_dets['parameter'][$i]['kucun']}"><br>
                        </div>
                <?php
                    }
                ?>
                <!-- <div class="cate" style="width: 100%;height: 60px;">
                    型号<input type="text" name="cate[]" value=""><br>
                    价格<input type="text" name="price[]" value=""><br>
                    库存<input type="text" name="kucun[]" value=""><br>
                </div> -->
            </div>
            <button type="button" id="add_cate">添加商品型号</button><button type="button" id="del_cate">删除商品型号</button>
            <script type="text/javascript">
                $('#add_cate').click(function(){
                    $('.cate').after('<div class="cate2" style="width: 100%;height:60px;">型号<input type="text" name="cate[]"><br>价格<input type="text" name="price[]"><br>库存<input type="text" name="kucun[]"><br></div>');
                });
                $('#del_cate').click(function(){
                    $('.cate2:last').remove();
                })
            </script>
         
            <!-- <li style="margin:3px 0px;">封面图：<input type="file" value="{$produce_dets['pic']}" name="pic"> -->
                <!-- <if condition="$produce_dets['pic'] neq ''"> -->
                <!-- <img src="{$produce_dets['pic']}"> -->
                <!-- </if> -->
            <!-- </li> -->
            <!-- <li style="margin:3px 0px;">商品图片1：<input type="file" value="{$produce_dets['pic1']}" name="pic1"> -->
                <!-- <if condition="$produce_dets['pic1'] neq ''"> -->
                    <!-- <img src="{$produce_dets['pic1']}"> -->
                <!-- </if> -->
            <!-- </li> -->
            <!-- <li style="margin:3px 0px;">商品图片2：<input type="file" value="{$produce_dets['pic2']}" name="pic2"> -->
                <!-- <if condition="$produce_dets['pic2'] neq ''"> -->
                    <!-- <img src="{$produce_dets['pic2']}"> -->
                <!-- </if> -->
            <!-- </li> -->
            <!-- <li style="margin:3px 0px;">商品图片3：<input type="file" value="{$produce_dets['pic3']}" name="pic3"> -->
                <!-- <if condition="$produce_dets['pic3'] neq ''"> -->
                    <!-- <img src="{$produce_dets['pic3']}"> -->
                <!-- </if> -->
            <!-- </li> -->
            <!-- <li style="margin:3px 0px;">商品图片4：<input type="file" value="{$produce_dets['pic4']}" name="pic4"> -->
                <!-- <if condition="$produce_dets['pic4'] neq ''"> -->
                    <!-- <img src="{$produce_dets['pic4']}"> -->
                <!-- </if> -->
            <!-- </li> -->
			<div class="container">
                <div class="input-group">
                    <input type="hidden" class="form-control" readonly name="pic" id="pic" value="{$produce_dets['pic']}" />
                    <span class="input-group-btn">
                        <div class="btn btn-success  fileinput-button">
                            封面图
                            <input id="fileupload" type="file" name="files[]" multiple>
                        </div>
                    </span>
                </div>
                <!-- The container for the uploaded files -->
                <div width="100%" id="files" class="files">
                    <img src="{$produce_dets['pic']}" width='100'/>
                </div>
            </div>

            <div class="container">
                <div class="input-group">
                    <input type="hidden" class="form-control" readonly name="pic1" id="pic1" value="{$produce_dets['pic1']}" />
                    <span class="input-group-btn">
                        <div class="btn btn-success  fileinput-button">
                            商品图片1
                            <input id="fileupload1" type="file" name="files[]" multiple>
                        </div>
                    </span>
                </div>
                <!-- The container for the uploaded files -->
                <div width="100%" id="files1" class="files">
                    <img src="{$produce_dets['pic1']}" width='100'/>
                </div>
            </div>

            <div class="container">
                <div class="input-group">
                    <input type="hidden" class="form-control" readonly name="pic2" id="pic2" value="{$produce_dets['pic2']}" />
                    <span class="input-group-btn">
                        <div class="btn btn-success  fileinput-button">
                            商品图片2
                            <input id="fileupload2" type="file" name="files[]" multiple>
                        </div>
                    </span>
                </div>
                <!-- The container for the uploaded files -->
                <div width="100%" id="files2" class="files">
                    <img src="{$produce_dets['pic2']}" width='100'/>
                </div>
            </div>

            <div class="container">
                <div class="input-group">
                    <input type="hidden" class="form-control" readonly name="pic3" id="pic3" value="{$produce_dets['pic3']}" />
                    <span class="input-group-btn">
                        <div class="btn btn-success  fileinput-button">
                            商品图片3
                            <input id="fileupload3" type="file" name="files[]" multiple>
                        </div>
                    </span>
                </div>
                <!-- The container for the uploaded files -->
                <div width="100%" id="files3" class="files">
                    <img src="{$produce_dets['pic3']}" width='100'/>
                </div>
            </div>

            <div class="container">
                <div class="input-group">
                    <input type="hidden" class="form-control" readonly name="pic4" id="pic4" value="{$produce_dets['pic4']}" />
                    <span class="input-group-btn">
                        <div class="btn btn-success  fileinput-button">
                            商品图片4
                            <input id="fileupload4" type="file" name="files[]" multiple>
                        </div>
                    </span>
                </div>
                <!-- The container for the uploaded files -->
                <div width="100%" id="files4" class="files">
                    <img src="{$produce_dets['pic4']}" width='100'/>
                </div>
            </div>
        </ul>
        <style>
            #inputa li p {
                height: 10vmin;
            }

            #inputa li p input {
                width: 15%;
                vertical-align: middle;
            }
        </style>
        <input type="hidden" class="province_id" value="{$info['province_id']}">
        <input type="hidden" class="city_id" value="{$info['city_id']}">
        <input type="hidden" class="country_id" value="{$info['country_id']}">
        <input type="hidden" class="address_id" value="{$info['address_id']}">
        <input type="hidden" class="type" value="{$type}">
    </div>
</form>
<script>
$(function () {
    var url =  "{:U('home/up')}";
    $('#fileupload').fileupload({
        url: url,
        dataType: 'json',
        done: function (e, data) {
            if(data.result.status == 1){
                $("#pic").val('/'+data.result.pic_url);
                $("#files").html("<img src=__ROOT__/"+data.result.pic_url+" width='100'/>");
            }else{
                $("#files").html(data.result.info);
            }
        }
    });

    $('#fileupload1').fileupload({
        url: url,
        dataType: 'json',
        done: function (e, data) {
            if(data.result.status == 1){
                $("#pic1").val('/'+data.result.pic_url);
                $("#files1").html("<img src=__ROOT__/"+data.result.pic_url+" width='100'/>");
            }else{
                $("#files1").html(data.result.info);
            }
        }
    });

    $('#fileupload2').fileupload({
        url: url,
        dataType: 'json',
        done: function (e, data) {
            if(data.result.status == 1){
                $("#pic2").val('/'+data.result.pic_url);
                $("#files2").html("<img src=__ROOT__/"+data.result.pic_url+" width='100'/>");
            }else{
                $("#files2").html(data.result.info);
            }
        }
    });

    $('#fileupload3').fileupload({
        url: url,
        dataType: 'json',
        done: function (e, data) {
            if(data.result.status == 1){
                $("#pic3").val('/'+data.result.pic_url);
                $("#files3").html("<img src=__ROOT__/"+data.result.pic_url+" width='100'/>");
            }else{
                $("#files3").html(data.result.info);
            }
        }
    });

    $('#fileupload4').fileupload({
        url: url,
        dataType: 'json',
        done: function (e, data) {
            if(data.result.status == 1){
                $("#pic4").val('/'+data.result.pic_url);
                $("#files4").html("<img src=__ROOT__/"+data.result.pic_url+" width='100'/>");
            }else{
                $("#files4").html(data.result.info);
            }
        }
    });
});
</script>
<style>
    .selectcc {
        width: 83%;
        border: none;
        border-bottom: 1px solid #aaa;
        font-family: "微软雅黑";
        /*很关键：将默认的select选择框样式清除*/
        appearance: none;
        -moz-appearance: none;
        -webkit-appearance: none;
        /*为下拉小箭头留出一点位置，避免被文字覆盖*/
        padding-right: 14px;
    }
</style>

<div class="submit"><a href="javascript:void(0)" style="background:#ff6a31;"><eq name="id" value="">确认添加<else />确认修改</eq></a></div>

<script>
    $('.submit').click(function () {
    	var res=0;
        $("input[name='cate[]']").each(function(){
            if($(this).val()==""){
                res=1;
            }
        });
        if(res==1){
            layer.msg('请填写型号');
            return;
        }
        $("#goodsinfo").submit();
    })

    function change_city() {
        var pid = $("#province").val();
        $.ajax({
            url: "{:U('Shop/Home/Change_city')}",
            data: {'pid': pid},
            type: "post",
            datatype: "json",
            success: function (mes) {
                if (mes.status == 1) {
                    var data = mes.info;
                    var str = '<option value="" selected="selected">--请选择--</option>';
                    $.each(data, function (i, v) {
                        str += '<option value="' + v.id + '" selected="selected">' + v.name + '</option>';
                    })
                    $('#city').html(str);
                }
            }
        })
    }

    function change_town() {
        var pid = $("#city").val();

        $.ajax({
            url: "{:U('Shop/Home/Change_town')}",
            data: {'pid': pid},
            type: "post",
            datatype: "json",
            success: function (mes) {
                if (mes.status == 1) {
                    var data = mes.info;
                    var str = '<option value="" selected="selected">--请选择--</option>';
                    $.each(data, function (i, v) {
                        str += '<option value="' + v.id + '" selected="selected">' + v.name + '</option>';
                    })

                    $('#district').html(str);
                } else {
                    var str = '<option value="" selected="selected">暂无下级</option>';
                    $('#district').html(str);
                }
            }
        })
    }
</script>
<script  type="text/javascript" charset="utf-8" async defer>
    var E = window.wangEditor;
    var editor2 = new E('#editor');
     editor2.customConfig.menus = [
        'head',  // 标题
        'bold',  // 粗体
        'italic',  // 斜体
        'underline',  // 下划线
        'strikeThrough',  // 删除线
        'foreColor',  // 文字颜色
        'justify',  // 对齐方式
        'image',  // 插入图片
        'table',  // 表格
    ];
    editor2.customConfig.uploadImgServer = "{:U('Shop/Home/editUpload')}";
    editor2.customConfig.uploadImgMaxLength = 5;
    // editor2.customConfig.menus = [
    //     'head',  // 标题
    //     'bold',  // 粗体
    //     'italic',  // 斜体
    //     'underline',  // 下划线
    //     'strikeThrough',  // 删除线
    //     'foreColor',  // 文字颜色
    //     'backColor',  // 背景颜色
    //     'link',  // 插入链接
    //     'list',  // 列表
    //     'justify',  // 对齐方式
    //     'quote',  // 引用
    //     'emoticon',  // 表情
    //     'image',  // 插入图片
    //     'table',  // 表格
    //     'video',  // 插入视频
    //     'code',  // 插入代码
    //     'undo',  // 撤销
    //     'redo'  // 重复
    // ];

      // 自定义配置颜色（字体颜色、背景色）
    editor2.customConfig.colors = [
        '#000000',
        '#eeece0',
        '#1c487f',
        '#4d80bf',
        '#c24f4a',
        '#8baa4a',
        '#7b5ba1',
        '#46acc8',
        '#f9963b',
        '#ffffff'
    ];


    var $text1 = $('#text1')
    editor2.customConfig.onchange = function (html) {
            // 监控变化，同步更新到 textarea
            $text1.val(html);
    }
    editor2.create();
    editor2.txt.html($text1.val());

</script>



</body>
</html>
